<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>+.=:+*=*+#:+</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

</head>

<body>
<header class="site-header">
  <nav class="nav">
    <a class="brand" href="../index.html" rel="noopener">Sewon Min</a>
    <a class="brand" a href="#" class="to-top" rel="noopener">Bread Cosmologies</a>
    <div class="nav-group">
      <button id="indexToggle" class="nav-link is-button"
              aria-haspopup="true" aria-expanded="false" aria-controls="indexDropdown">
        Index
      </button>

      <!-- 드롭다운: 텍스트 주변만 흰 박스 -->
      <div id="indexDropdown" class="dropdown-lite" hidden>
        <ul class="dropdown-list">
          <li><a href="../air/air.html">Air Poetry/Fish Poetry</a></li>
          <li><a href="../face/face.html">Faces of Scattered Love</a></li>
          <li><a href="https://internet-river.neocities.org/" target="_blank" rel="noopener noreferrer">
.**+**.***.......**.
</a></li>
          <li><a href="../local/local.html">Localitea</a></li>
          <li><a class="brand" a href="#" class="to-top" rel="noopener">Bread Cosmologies</a></li>         
        </ul>
      </div>
    </div>

  </nav>
</header>

  <!-- 본문 컨테이너: 800px 중앙 정렬 -->
  <main class="container">
    <!-- 프로젝트 섹션 -->
    <section class="project">

      <!-- 인트로(기존 article 내용) -->
      <section class="intro">
        <p>
          Collaboration with Amy Suzuki
        </p>
      
      </section>

      <hr class="rule" />

      <!-- 갤러리 아이템들 -->
      <figure class="faces">
        <img src="../img/bread_001.webp" alt="Bread meteorites placed against a black background" loading="lazy">
        <figcaption></figcaption>
      </figure>

      <!-- 비디오는 figure로 묶어도 좋고, 전용 섹션을 써도 OK -->
      <figure class="video-frame frame-sm">
        <video class="autoplay-video" muted playsinline loop preload="none"
               poster="" data-src="images/movie_1.webm"></video>
        <figcaption></figcaption>
      </figure>


    </section>
  </main>
</body>

<script>

  
  // iOS/Safari 호환: muted + playsinline이면 사용자 제스처 없이도 재생 가능
  const vids = document.querySelectorAll('.autoplay-video');

  // 실제 소스 지연 세팅
  const ensureSrc = v => {
    if (!v.dataset.src) return;
    if (!v.src || v.src === window.location.href) {
      v.src = v.dataset.src;          // data-src → src
      v.load();                       // 메타데이터 로드
    }
  };

  const io = new IntersectionObserver((entries) => {
    entries.forEach(async (entry) => {
      const v = entry.target;
      if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
        ensureSrc(v);                 // 화면에 충분히 보일 때만 로드
        try { await v.play(); } catch(e) {} // 자동재생 정책 회피(무음이므로 보통 OK)
      } else {
        v.pause();
      }
    });
  }, { threshold: [0, 0.5, 1] });

  vids.forEach(v => io.observe(v));


document.addEventListener('DOMContentLoaded', () => {
  const toggle = document.getElementById('indexToggle');
  const dd     = document.getElementById('indexDropdown');

  const open  = () => { dd.hidden = false; toggle.setAttribute('aria-expanded', 'true'); };
  const close = () => { dd.hidden = true;  toggle.setAttribute('aria-expanded', 'false'); };
  const isOpen = () => toggle.getAttribute('aria-expanded') === 'true';

  toggle.addEventListener('click', (e) => {
    e.preventDefault();
    isOpen() ? close() : open();
  });

  // 바깥 클릭 닫기
  document.addEventListener('click', (e) => {
    if (e.target === toggle || dd.contains(e.target)) return;
    if (isOpen()) close();
  });

  // ESC 닫기
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isOpen()) { close(); toggle.focus(); }
  });
});
</script>



</body>
